---
title: Browsers, Cookies and Security
date: 2020-11-14 05:20:01
---

## Browsers, Cookies and Security

**HTTP** is stateless - Server has no way of knowing your previous request. If you are a new user or a returning user.

Cookie was introduced to differentiate people and show information relevant to them. In
1994 at Netscape, 2 guys made the initial specification for cookies.
Unix system already had concept of fortune cookies.

**Cookie** is part of HTTP message being exchanged.
- One of response headers is _set-cookie_ headers.
- Browser sees this and stores the info on your computer.
- Next time you make a request browser will automatically add cookie to request header.



**Tracking pixel** - which is a transparent image that you cant know but loads an image which in turn sends a cookie to your browser, when you load a page.

Every site you visit can be monitored by advertising websites using cookie
when images scripts etc get loaded on a page 3rd party websites are called which can set multiple cookies in your browser. You visited them in background and now they can track you.
They dont know your name but in which area you live, your interests. Can guess your age and sex. With this they can send you more targetted ads.

2018 GDPR- General Data Protection Regulation was introduced by EU.

Other ways of storing data on browsers are - local storage, indexedDB, webSQL.


### Cookie based authentication

- Session is generated by the server and stored in a database
- Client only receives the session id.
- Cookies are sent using HTTP headers and cookie is only the carrier to transport sessin id. 
- Browser will always send cookies with every request

Cookies can be modified by the client, and servers cant trust them.
So banks use short lived sessions and you need to login again.

#### Cookie stealing
If I can get hold of cookie from your browser then I can pretend to be you
Cross site scripting is a very easy way of doing it

### Cross site scripting XSS

Cross-Site Scripting (XSS) attacks occur when:

1) Data enters a Web application through an untrusted source, most frequently a web request.
2) The data is included in dynamic content that is sent to a web user without being validated for malicious content.

Xss explained: [youtube redirect](https://youtu.be/L5l9lSnNMxg)

Tim Berner's Lee sitting at CERN deciding how the web will work.
Web is based on HTML. The angular tags are instructions. Anything that goes inside will be shown as text to user `<html></html>`.
Then comes JS. It is a language that can affect the document. Take the output from JS in `<script>` and put it in rest of the text.
JS creates a webpage and moves bits around.

Now if you forget to escape `< to` &lt ;

Malicious scripts are injected into otherwise benign and trusted websites
anywhere a web application uses input from a user within the output it generates _**without validating or encoding it**_.

An attacker can use XSS to send a malicious script to an unsuspecting user. The end userâ€™s browser has no way to know that the script should not be trusted, and will execute the script. Because it thinks the script came from a trusted source, the malicious script can access any cookies, session tokens, or other sensitive information retained by the browser and used with that site. These scripts can even rewrite the content of the HTML page.

## Token based Authorization

To solve this you can grant access to your profile to third party website using token. That are temporary. Never expose username password to any third party except for authenticating with the bank with their authentication server.

OAuth, OpenID, JWT

JWT token is cryptographically signed. It has limited lifetime.
Sent via authorization HTTP header
You can use this token to get any type of data that this token gives access to.
Tokens have standards for interoperability
Sessions can be implemented as need by the server

OAuth 2.0 explained: [Youtube redirect](https://youtu.be/996OiexHze0)
